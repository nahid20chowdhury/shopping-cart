<!DOCTYPE html>
<html>

<head>
    <title>Shopping Cart</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css" rel="stylesheet" />
    <link href="style.css" rel="stylesheet">
</head>

<body>

    <section>
        <div class="container">
            <div class="cart">
                <div class="col-md-12 col-lg-10 mx-auto">
                    <div id="cartitem1" class="cart-item">
                        <div class="row">
                            <div class="col-md-7 center-item">
                                <img src="images/product-1.png" alt="">
                                <h5>iPhone 11 128GB Black</h5>
                            </div>

                            <div class="col-md-5 center-item">
                                <div class="input-group number-spinner">
                                    <button id="minusBtn1" class="btn btn-default"><i class="fas fa-minus"></i></button>
                                    <input id="numberOfPhone" type="text" class="form-control text-center" value="0">
                                    <button id="plusBtn1" class="btn btn-default"><i class="fas fa-plus"></i></button>
                                </div>
                                <h5>$<span id="phoneMoney">0</span></h5>
                                <img src="images/remove.png" alt="" id="remove-cart1" class="remove-item">
                            </div>
                        </div>
                    </div>

                    <div id="cartitem2" class="cart-item">
                        <div class="row">
                            <div class="col-md-7 center-item mx-auto">
                                <img src="images/product-2.png" alt="">
                                <h5>iPhone 11 Silicone Case - Black</h5>
                            </div>
                            <div class="col-md-5 center-item">
                                <div class="input-group number-spinner">
                                    <button id="minusBtn2" class="btn btn-default"><i class="fas fa-minus"></i></button>
                                    <input id="numberOfCover" type="text" class="form-control text-center" value="0">
                                    <button id="plusBtn2" class="btn btn-default"><i class="fas fa-plus"></i></button>

                                </div>
                                <h5>$<span id="coverMoney">0</span></h5>
                                <img src="images/remove.png" alt="" id="remove-cart2" class="remove-item">
                            </div>
                        </div>
                    </div>

                    <div class="cart-item">
                        <div class="row">

                            <div class="col-md-8">
                                <h5>Subtotal: </h5>
                                <h5>Tax:</h5>
                                <h5>Total:</h5>
                            </div>

                            <div class="col-md-4 status">
                                <h5>$<span id="currentSpent">0</span></h5>
                                <h5>$<span id="tax-added">0</span></h5>
                                <h5>$<span id="after-tax">0</span></h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 pt-4 pb-4">
                        <button type="button" class="btn btn-success check-out">Check Out</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script>
        closeButton("remove-cart1", "cartitem1");
        closeButton("remove-cart2", "cartitem2")

        function closeButton(removeCart, cartName) {
            var removeCartItem = document.getElementById(removeCart);
            removeCartItem.addEventListener("click", function() {
                const cartItem = document.getElementById(cartName)
                cartItem.style.display = "none";
            })
        }

        plusBtn1.addEventListener("click", function() {
            updateSpanText("numberOfPhone", "phoneMoney", 1219, "currentSpent", 1219, "tax-added", 100, "after-tax");
        })
        plusBtn2.addEventListener("click", function() {

            updateSpanText("numberOfCover", "coverMoney", 59, "currentSpent", 59, "tax-added", 5, "after-tax");
        })

        function updateSpanText(id, money, perPlusAmount, spent, perPlusAm, tax, taxNumber, afTax) {
            const currentNumber = parseFloat(document.getElementById(id).value);
            const newNumber = currentNumber + 1;
            document.getElementById(id).value = newNumber;

            const moneyAm = parseFloat(document.getElementById(money).innerText);
            const newMoneyAm = moneyAm + perPlusAmount;
            document.getElementById(money).innerText = newMoneyAm;

            const currentSpent = document.getElementById(spent).innerText;
            const currentSpentNumber = parseFloat(currentSpent);
            const totalSpent = currentSpentNumber + perPlusAm;
            document.getElementById(spent).innerText = totalSpent;

            const totalTax = parseFloat(document.getElementById(tax).innerText);
            const allTax = taxNumber;
            document.getElementById(tax).innerText = totalTax + allTax

            const afterTax = document.getElementById(afTax).innerText;
            const afterTaxNumber = parseFloat(afterTax);
            const totalAmount = afterTaxNumber + taxNumber + perPlusAmount;
            document.getElementById(afTax).innerText = totalAmount
        }
        minusBtn1.addEventListener("click", function() {
            minusSpanText("numberOfPhone", "phoneMoney", 1219, "currentSpent", "tax-added", 100, "after-tax");
        })
        minusBtn2.addEventListener("click", function() {
            minusSpanText("numberOfCover", "coverMoney", 59, "currentSpent", "tax-added", 5, "after-tax");
        })

        function minusSpanText(id1, toMoney, perMinus, spentCurrent, taxAdd, taxAddKor, takaMinus, ) {
            const currentNumber1 = parseFloat(document.getElementById(id1).value);
            if (currentNumber1 > 0) {
                const newNumber1 = currentNumber1 - 1;
                document.getElementById(id1).value = newNumber1;

                const money1 = parseFloat(document.getElementById(toMoney).innerText);
                const newMoney1 = newNumber1 * perMinus;
                document.getElementById(toMoney).innerText = newMoney1;

                const currentSpent1 = document.getElementById(spentCurrent).innerText;
                const currentSpentNumber1 = parseFloat(currentSpent1);
                const totalSpent1 = currentSpentNumber1 - perMinus;
                document.getElementById(spentCurrent).innerText = totalSpent1;

                const totalTax1 = parseFloat(document.getElementById(taxAdd).innerText);
                const toTax = taxAddKor;
                document.getElementById(taxAdd).innerText = totalTax1 - toTax;

                const afterTax1 = document.getElementById(takaMinus).innerText;
                const afterTaxNumber1 = parseFloat(afterTax1);
                const totalAmount2 = afterTaxNumber1 - taxAddKor - perMinus;
                document.getElementById(takaMinus).innerText = totalAmount2;
            }
        }
    </script>
</body>

</html>